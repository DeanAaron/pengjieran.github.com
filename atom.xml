<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>PengJieran&#39;s blog</title>
  <subtitle>pengjieran@gmail.com</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://pengjieran.github.io/"/>
  <updated>2016-05-06T15:14:04.035Z</updated>
  <id>http://pengjieran.github.io/</id>
  
  <author>
    <name>PengJieran</name>
    <email>pengjieran@gmail.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>hexo命令及通用配置项</title>
    <link href="http://pengjieran.github.io/2016/05/06/hexo/"/>
    <id>http://pengjieran.github.io/2016/05/06/hexo/</id>
    <published>2016-05-06T06:17:15.000Z</published>
    <updated>2016-05-06T15:14:04.035Z</updated>
    
    <content type="html">&lt;blockquote&gt;
&lt;p&gt;本篇文章主要介绍hexo的安装，配置选项，主题的配置，如何写一篇文章以及hexo的命令&lt;/p&gt;
&lt;/blockquote&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;hexo简介&quot;&gt;&lt;a href=&quot;#hexo简介&quot; class=&quot;headerlink&quot; title=&quot;hexo简介&quot;&gt;&lt;/a&gt;hexo简介&lt;/h1&gt;&lt;p&gt;Hexo 是一个轻量的静态博客框架。通过Hexo可以快速生成一个静态博客框架,仅需要几条命令就可以完成,相当方便。&lt;/p&gt;
&lt;h1 id=&quot;hexo安装及初始化&quot;&gt;&lt;a href=&quot;#hexo安装及初始化&quot; class=&quot;headerlink&quot; title=&quot;hexo安装及初始化&quot;&gt;&lt;/a&gt;hexo安装及初始化&lt;/h1&gt;&lt;p&gt;必须的安装环境&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;node&lt;/li&gt;
&lt;li&gt;npm(node包管理器)&lt;br&gt;安装hexo-cli以及hexo&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;npm install hexo-cli -g&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;npm install hexo --save&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;如果无法安装，请切换到国内的源&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;npm install -g cnpm --registry=https://registry.npm.taobao.org&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h1 id=&quot;hexo初始化及配置&quot;&gt;&lt;a href=&quot;#hexo初始化及配置&quot; class=&quot;headerlink&quot; title=&quot;hexo初始化及配置&quot;&gt;&lt;/a&gt;hexo初始化及配置&lt;/h1&gt;&lt;h2 id=&quot;初始化&quot;&gt;&lt;a href=&quot;#初始化&quot; class=&quot;headerlink&quot; title=&quot;初始化&quot;&gt;&lt;/a&gt;初始化&lt;/h2&gt;&lt;p&gt;新建一个文件夹用于存放主站的各种文件&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;mkdir blog&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;进入文件夹，初始化并安装npm&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; blog&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hexo init&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;npm install&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;生成的文件夹结构说明：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;scaffolds 工具模板&lt;/li&gt;
&lt;li&gt;scripts hexo的功能js&lt;/li&gt;
&lt;li&gt;source 博客资源文件夹&lt;/li&gt;
&lt;li&gt;source/_drafts 草稿文件夹&lt;/li&gt;
&lt;li&gt;source/_posts 文章文件夹&lt;/li&gt;
&lt;li&gt;themes 存放主题的文件夹&lt;/li&gt;
&lt;li&gt;themes/landscape 默认皮肤文件夹&lt;/li&gt;
&lt;li&gt;_config.yml 全局配置文件&lt;/li&gt;
&lt;li&gt;db.json json格式的静态常量数据库&lt;/li&gt;
&lt;li&gt;_posts 目录：Hexo存放博客文章的文件夹&lt;/li&gt;
&lt;li&gt;themes 目录：存放主题的文件夹，默认使用官方的主题 你也可以从 hexo主题页面 下载你喜欢的主题&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;hexo配置&quot;&gt;&lt;a href=&quot;#hexo配置&quot; class=&quot;headerlink&quot; title=&quot;hexo配置&quot;&gt;&lt;/a&gt;hexo配置&lt;/h2&gt;&lt;h3 id=&quot;hexo全局配置&quot;&gt;&lt;a href=&quot;#hexo全局配置&quot; class=&quot;headerlink&quot; title=&quot;hexo全局配置&quot;&gt;&lt;/a&gt;hexo全局配置&lt;/h3&gt;&lt;p&gt;hexo全局配置文件就放在blog目录下，既你自己创建的主站的目录下，文件名是_config.yml&lt;br&gt;其中的各配置项解释如下&lt;/p&gt;
&lt;h4 id=&quot;网站&quot;&gt;&lt;a href=&quot;#网站&quot; class=&quot;headerlink&quot; title=&quot;网站&quot;&gt;&lt;/a&gt;网站&lt;/h4&gt;&lt;p&gt;title: #网站标题&lt;br&gt;subtitle: #网站副标题&lt;br&gt;description: #网站描述,给搜索引擎看的&lt;br&gt;author: #您的名字&lt;br&gt;language: #网站使用的语言&lt;br&gt;timezone: #网站时区。Hexo 预设使用您电脑的时区。时区列表&lt;/p&gt;
&lt;h4 id=&quot;网址&quot;&gt;&lt;a href=&quot;#网址&quot; class=&quot;headerlink&quot; title=&quot;网址&quot;&gt;&lt;/a&gt;网址&lt;/h4&gt;&lt;p&gt;url: #网址&lt;br&gt;root: #网站根目录&lt;br&gt;permalink: #文章的 永久链接 格式 :year/:month/:day/:title/&lt;br&gt;permalink:_#default 永久链接中各部分的默认值&lt;/p&gt;
&lt;p&gt;#网站存放在子目录&lt;/p&gt;
&lt;p&gt;#如果您的网站存放在子目录中，例如 &lt;a href=&quot;http://yoursite.com/blog，则请将您的&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://yoursite.com/blog，则请将您的&lt;/a&gt; url 设为 &lt;a href=&quot;http://yoursite.com/blog&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://yoursite.com/blog&lt;/a&gt; 并把 root 设为 /blog/。&lt;/p&gt;
&lt;h4 id=&quot;目录&quot;&gt;&lt;a href=&quot;#目录&quot; class=&quot;headerlink&quot; title=&quot;目录&quot;&gt;&lt;/a&gt;目录&lt;/h4&gt;&lt;p&gt;source_dir: #资源文件夹，这个文件夹用来存放内容。默认值是source&lt;br&gt;public_dir: #公共文件夹，这个文件夹用于存放生成的站点文件。默认值是public&lt;br&gt;tag_dir: #标签文件夹。默认值是tags&lt;br&gt;archive_dir: #归档文件夹。默认值是archives&lt;br&gt;category_dir: #分类文件夹.默认值是categories&lt;br&gt;code_dir: #Include code 文件夹.默认值是downloads/code&lt;br&gt;i18n_dir: #国际化（i18n）文件夹。默认值:lang&lt;br&gt;skip_render: #跳过指定文件的渲染，您可使用 glob 来配置路径。&lt;/p&gt;
&lt;h4 id=&quot;文章&quot;&gt;&lt;a href=&quot;#文章&quot; class=&quot;headerlink&quot; title=&quot;文章&quot;&gt;&lt;/a&gt;文章&lt;/h4&gt;&lt;p&gt;参数 描述 默认值&lt;br&gt;new_post_name 新文章的文件名称 :title.md&lt;br&gt;default_layout 预设布局 post&lt;br&gt;auto_spacing 在中文和英文之间加入空格 false&lt;br&gt;titlecase 把标题转换为 title case false&lt;br&gt;external_link 在新标签中打开链接 true&lt;br&gt;filename_case 把文件名称转换为 (1) 小写或 (2) 大写 0&lt;br&gt;render_drafts 显示草稿 false&lt;br&gt;post_asset_folder 启动 Asset 文件夹 false&lt;br&gt;relative_link 把链接改为与根目录的相对位址 false&lt;br&gt;future 显示未来的文章 true&lt;br&gt;highlight 代码块的设置&lt;/p&gt;
&lt;h4 id=&quot;分类-amp-标签&quot;&gt;&lt;a href=&quot;#分类-amp-标签&quot; class=&quot;headerlink&quot; title=&quot;分类&amp;amp;标签&quot;&gt;&lt;/a&gt;分类&amp;amp;标签&lt;/h4&gt;&lt;p&gt;参数 描述 默认值&lt;br&gt;default_category 默认分类 uncategorized&lt;br&gt;category_map 分类别名&lt;br&gt;tag_map 标签别名&lt;/p&gt;
&lt;h4 id=&quot;日期-时间格式&quot;&gt;&lt;a href=&quot;#日期-时间格式&quot; class=&quot;headerlink&quot; title=&quot;日期 / 时间格式&quot;&gt;&lt;/a&gt;日期 / 时间格式&lt;/h4&gt;&lt;p&gt;Hexo 使用 Moment.js 来解析和显示时间。&lt;br&gt;参数 描述 默认值&lt;br&gt;date_format 日期格式 MMM D YYYY&lt;br&gt;time_format 时间格式 H:mm:ss&lt;/p&gt;
&lt;h4 id=&quot;分页&quot;&gt;&lt;a href=&quot;#分页&quot; class=&quot;headerlink&quot; title=&quot;分页&quot;&gt;&lt;/a&gt;分页&lt;/h4&gt;&lt;p&gt;参数 描述 默认值&lt;br&gt;per_page 每页显示的文章量 (0 = 关闭分页功能) 10&lt;br&gt;pagination_dir 分页目录 page&lt;/p&gt;
&lt;h4 id=&quot;扩展&quot;&gt;&lt;a href=&quot;#扩展&quot; class=&quot;headerlink&quot; title=&quot;扩展&quot;&gt;&lt;/a&gt;扩展&lt;/h4&gt;&lt;p&gt;参数 描述&lt;br&gt;theme 当前主题名称&lt;br&gt;deploy 部署&lt;/p&gt;
&lt;h4 id=&quot;插件&quot;&gt;&lt;a href=&quot;#插件&quot; class=&quot;headerlink&quot; title=&quot;插件&quot;&gt;&lt;/a&gt;插件&lt;/h4&gt;&lt;p&gt;hexo一些第三方的插件可以扩展hexo的能力，常用的插件有首页文章数量,存档,分类,发布器，rss订阅等&lt;br&gt;安装插件&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;npm install hexo-generator-index --save&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;npm install hexo-generator-archive --save&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;npm install hexo-generator-category --save&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;npm install hexo-generator-tag --save&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;npm install hexo-server --save&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;npm install hexo-deployer-git --save&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;npm install hexo-deployer-heroku --save&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;npm install hexo-deployer-rsync --save&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;npm install hexo-deployer-openshift --save&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;npm install hexo-renderer-marked@0.2 --save&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;npm install hexo-renderer-stylus@0.2 --save&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;npm install hexo-generator-feed@1 --save&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;npm install hexo-generator-sitemap@1 --save&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;安装完成之后的插件配置项&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;index_generator:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  per_page: 10 &lt;span class=&quot;comment&quot;&gt;##首页默认10篇文章标题 如果值为0不分页&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;archive_generator:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  per_page: 10 &lt;span class=&quot;comment&quot;&gt;##归档页面默认10篇文章标题&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  yearly: &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;  &lt;span class=&quot;comment&quot;&gt;##生成年视图&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  monthly: &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;##生成月视图&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tag_generator:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  per_page: 10 &lt;span class=&quot;comment&quot;&gt;##标签分类页面默认10篇文章&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;category_generator: &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  per_page: 10 &lt;span class=&quot;comment&quot;&gt;###分类页面默认10篇文章&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;feed:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt;: atom &lt;span class=&quot;comment&quot;&gt;##feed类型 atom或者rss2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  path: atom.xml &lt;span class=&quot;comment&quot;&gt;##feed路径&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;built_in&quot;&gt;limit&lt;/span&gt;: 20  &lt;span class=&quot;comment&quot;&gt;##feed文章最小数量&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;deploy:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt;: git &lt;span class=&quot;comment&quot;&gt;##部署类型 hexo3.0已经修改为git,其他类型自行google之&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  repo: &amp;lt;repository url&amp;gt; &lt;span class=&quot;comment&quot;&gt;##git仓库地址&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  branch: [branch] &lt;span class=&quot;comment&quot;&gt;##git 页面分支&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  message: [message] &lt;span class=&quot;comment&quot;&gt;##git message建议默认字段update 可以自定义&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  -多部署&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      deploy:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt;: git&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          message: update  &lt;span class=&quot;comment&quot;&gt;##git message建议默认字段update 可以自定义&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          repo: &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          github: &amp;lt;repository url&amp;gt;,[branch] &lt;span class=&quot;comment&quot;&gt;##github 仓库地址和分支&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          gitcafe: &amp;lt;repository url&amp;gt;,[branch] &lt;span class=&quot;comment&quot;&gt;##gitcafe 仓库地址和分支&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;更多插件可以去这里查找：&lt;a href=&quot;https://github.com/hexojs/hexo/wiki/Plugins&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/hexojs/hexo/wiki/Plugins&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;hexo主题配置&quot;&gt;&lt;a href=&quot;#hexo主题配置&quot; class=&quot;headerlink&quot; title=&quot;hexo主题配置&quot;&gt;&lt;/a&gt;hexo主题配置&lt;/h3&gt;&lt;p&gt;主题配置文件在主题目录的根目录下，文件名是_config.yml&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Header&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;menu:	&lt;span class=&quot;comment&quot;&gt;#导航栏连接&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Home: /&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Archives: /archives &lt;span class=&quot;comment&quot;&gt;#归档页面URL&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;自定义页面标题: /自定义页面URL&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rss: /atom.xml  &lt;span class=&quot;comment&quot;&gt;#rss地址  默认即可&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Content&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;excerpt_link: Read More &lt;span class=&quot;comment&quot;&gt;#阅读更多的文字显示&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;fancybox: &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;#开启fancybox效果&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Sidebar  #侧边栏设置&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sidebar: right&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;widgets:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  - category&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  - tag&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  - tagcloud&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  - archive&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  - recent_posts&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Miscellaneous #社交网络和统计连接地址&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;google_analytics: &lt;span class=&quot;comment&quot;&gt;#google analytics ID&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;favicon: /favicon.png &lt;span class=&quot;comment&quot;&gt;#网站的favicon&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;twitter:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;google_plus:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;fb_admins:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;fb_app_id:&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;创建文章&quot;&gt;&lt;a href=&quot;#创建文章&quot; class=&quot;headerlink&quot; title=&quot;创建文章&quot;&gt;&lt;/a&gt;创建文章&lt;/h2&gt;&lt;p&gt;新建文章：&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;hexo new post &amp;lt;title&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;新建页面：&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;hexo new page &amp;lt;title&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;生成的文章结构：&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;title: title &lt;span class=&quot;comment&quot;&gt;#文章标题&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;date: 2015-02-05 12:47:44 &lt;span class=&quot;comment&quot;&gt;#文章生成时间&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;categories: &lt;span class=&quot;comment&quot;&gt;#文章分类目录 可以省略&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tags: &lt;span class=&quot;comment&quot;&gt;#文章标签 可以省略&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;description: &lt;span class=&quot;comment&quot;&gt;#你对本页的描述 可以省略&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;keywords: Hexo, B&lt;span class=&quot;built_in&quot;&gt;log&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;comments: &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;#是否允许评论，默认为true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;多标签的语法可以是这样的：&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;tags:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    - 标签1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    - 标签2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    - 标签3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    - etc...&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;也可以是这样的：&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;tags: [tag1, tag2]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;想在首页文章预览添加图片可以添加photos参数&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;photos:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    - http://xxx.com/photo.jpg&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;想要显示阅读全文:&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#以上是文章摘要&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;!--more--&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#以下是余下全文&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h1 id=&quot;hexo命令&quot;&gt;&lt;a href=&quot;#hexo命令&quot; class=&quot;headerlink&quot; title=&quot;hexo命令&quot;&gt;&lt;/a&gt;hexo命令&lt;/h1&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;hexo n &lt;span class=&quot;string&quot;&gt;&quot;我的博客&quot;&lt;/span&gt; == hexo new &lt;span class=&quot;string&quot;&gt;&quot;我的博客&quot;&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;#新建文章&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hexo p == hexo publish&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hexo g == hexo generate&lt;span class=&quot;comment&quot;&gt;#生成&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hexo s == hexo server &lt;span class=&quot;comment&quot;&gt;#启动服务预览&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hexo d == hexo deploy&lt;span class=&quot;comment&quot;&gt;#部署&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hexo server &lt;span class=&quot;comment&quot;&gt;#Hexo 会监视文件变动并自动更新，您无须重启服务器。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hexo server &lt;span class=&quot;_&quot;&gt;-s&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;#静态模式&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hexo server -p 5000 &lt;span class=&quot;comment&quot;&gt;#更改端口&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hexo server -i 192.168.1.1 &lt;span class=&quot;comment&quot;&gt;#自定义 IP&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hexo clean &lt;span class=&quot;comment&quot;&gt;#清除缓存 网页正常情况下可以忽略此条命令&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hexo g &lt;span class=&quot;comment&quot;&gt;#生成静态网页&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hexo d &lt;span class=&quot;comment&quot;&gt;#开始部署&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hexo generate &lt;span class=&quot;comment&quot;&gt;#使用 Hexo 生成静态文件快速而且简单&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hexo generate --watch &lt;span class=&quot;comment&quot;&gt;#监视文件变动&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 两个命令是一样的&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hexo generate --deploy&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hexo deploy --generate&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hexo publish [layout] &amp;lt;title&amp;gt; &lt;span class=&quot;comment&quot;&gt;# 新建草稿&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;本篇文章主要介绍hexo的安装，配置选项，主题的配置，如何写一篇文章以及hexo的命令&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="hexo" scheme="http://pengjieran.github.io/categories/hexo/"/>
    
    
      <category term="hexo配置" scheme="http://pengjieran.github.io/tags/hexo%E9%85%8D%E7%BD%AE/"/>
    
      <category term="github静态博客搭建" scheme="http://pengjieran.github.io/tags/github%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/"/>
    
  </entry>
  
  <entry>
    <title>数据结构与算法系列（一）基础篇</title>
    <link href="http://pengjieran.github.io/2016/05/05/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E7%B3%BB%E5%88%97%EF%BC%88%E4%B8%80%EF%BC%89%E5%9F%BA%E7%A1%80%E7%AF%87/"/>
    <id>http://pengjieran.github.io/2016/05/05/数据结构与算法系列（一）基础篇/</id>
    <published>2016-05-05T13:31:53.000Z</published>
    <updated>2016-05-05T15:09:15.210Z</updated>
    
    <content type="html">&lt;h1 id=&quot;前情提要&quot;&gt;&lt;a href=&quot;#前情提要&quot; class=&quot;headerlink&quot; title=&quot;前情提要&quot;&gt;&lt;/a&gt;前情提要&lt;/h1&gt;&lt;p&gt;本篇文章主要解答什么是数据结构？什么是算法？算法是干什么的？什么情况下会需要使用算法？等等这些问题。所以，如果这些问题你都能很好的回答，请受小弟一拜！&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;名词解释&quot;&gt;&lt;a href=&quot;#名词解释&quot; class=&quot;headerlink&quot; title=&quot;名词解释&quot;&gt;&lt;/a&gt;名词解释&lt;/h1&gt;&lt;p&gt;接下来我会对数据结构与算法中遇到的一些名词做一些解释，如果有写的不对的，还请指正。&lt;/p&gt;
&lt;h2 id=&quot;数据结构&quot;&gt;&lt;a href=&quot;#数据结构&quot; class=&quot;headerlink&quot; title=&quot;数据结构&quot;&gt;&lt;/a&gt;数据结构&lt;/h2&gt;&lt;p&gt;什么是数据结构？&lt;br&gt;Sartaj Sahni在《数据结构、算法与应用》一书中称：“数据结构是数据对象，以及存在于该对象的实例和组成该实例的数据元素之间的各种联系。这些联系可以通过定义相关的函数来给出”。&lt;br&gt;Clifford A.Shaffer在《数据结构与算法分析》一书中称：“数据结构是ADT（抽象数据类型Abstract Data Type）的物理实现。”&lt;br&gt;Robert L.Kruse在《数据结构与程序设计》一书中，将一个数据结构的设计过程分成抽象层、数据结构层和实现层。其中，抽象层是指抽象数据类型层，它讨论数据的逻辑结构及其运算，数据结构层和实现层讨论一个数据结构的表示和在计算机内的存储细节以及运算的实现。&lt;br&gt;按照我个人的理解，数据结构就是指数据元素之间存在的关系。&lt;br&gt;数据结构又包含数据逻辑结构，数据物理结构和对数据的操作三个方面。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;数据逻辑结构：反映数据元素之间的逻辑关系，通常体现为数据元素之间的前后管理。与数据在计算机中的存储位置无关。&lt;/li&gt;
&lt;li&gt;数据物理结构：数据的逻辑结构在计算机存储空间的存放形式。包括数据元素的存储和关系的存储。用二进制位存储数据元素。关系的存储方式又分为顺序存储和链式存储两种，顺序存储的位置是连续的块，位置相邻。链式存储借助指示元素位置的指针来表示元素的逻辑关系。&lt;/li&gt;
&lt;li&gt;对数据的操作：&lt;br&gt;  每种数据结构都包含针对内部数据的操作，基本操作有&lt;ul&gt;
&lt;li&gt;初始化&lt;/li&gt;
&lt;li&gt;判断是否空状态&lt;/li&gt;
&lt;li&gt;统计元素个数&lt;/li&gt;
&lt;li&gt;判断是否包含指定元素&lt;/li&gt;
&lt;li&gt;遍历访问每个元素，只被访问一次&lt;/li&gt;
&lt;li&gt;获取指定元素值&lt;/li&gt;
&lt;li&gt;设置指定元素值&lt;/li&gt;
&lt;li&gt;插入指定元素&lt;/li&gt;
&lt;li&gt;删除指定元素&lt;/li&gt;
&lt;li&gt;查找指定元素&lt;h2 id=&quot;算法&quot;&gt;&lt;a href=&quot;#算法&quot; class=&quot;headerlink&quot; title=&quot;算法&quot;&gt;&lt;/a&gt;算法&lt;/h2&gt;什么是算法？以及算法是用来干什么的？&lt;br&gt;算法是在有限步骤内求解某一问题所使用的一组定义明确的规则。通俗点儿说，就是计算机的解题过程。&lt;br&gt;算法的前提是数据结构，一个算法应该具备以下五种基本特征：&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;有穷性：对于任一组合方式的输入值，都能在执行有穷步骤后结束。&lt;/li&gt;
&lt;li&gt;确定性：对于每种情况下所应执行的操作，在算法中都有明确的定义。&lt;/li&gt;
&lt;li&gt;可行性：算法中的所有操作都必须足够基本，也就是人们拿着纸笔做有限次运算后即可完成计算&lt;/li&gt;
&lt;li&gt;有输入：算法有0个以上的输入数据。&lt;/li&gt;
&lt;li&gt;有输出：算法有0个以上的输出数据，没有输出的算法是无意义的。&lt;br&gt;未完待续。。。。。。&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;前情提要&quot;&gt;&lt;a href=&quot;#前情提要&quot; class=&quot;headerlink&quot; title=&quot;前情提要&quot;&gt;&lt;/a&gt;前情提要&lt;/h1&gt;&lt;p&gt;本篇文章主要解答什么是数据结构？什么是算法？算法是干什么的？什么情况下会需要使用算法？等等这些问题。所以，如果这些问题你都能很好的回答，请受小弟一拜！&lt;br&gt;
    
    </summary>
    
      <category term="数据结构与算法" scheme="http://pengjieran.github.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"/>
    
    
      <category term="算法分析" scheme="http://pengjieran.github.io/tags/%E7%AE%97%E6%B3%95%E5%88%86%E6%9E%90/"/>
    
      <category term="数据结构与算法" scheme="http://pengjieran.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"/>
    
      <category term="算法基础" scheme="http://pengjieran.github.io/tags/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80/"/>
    
  </entry>
  
  <entry>
    <title>OAuth2认证和授权原理</title>
    <link href="http://pengjieran.github.io/2016/05/02/OAuth2%E8%AE%A4%E8%AF%81%E5%92%8C%E6%8E%88%E6%9D%83%E5%8E%9F%E7%90%86/"/>
    <id>http://pengjieran.github.io/2016/05/02/OAuth2认证和授权原理/</id>
    <published>2016-05-02T12:38:41.000Z</published>
    <updated>2016-05-02T15:08:33.346Z</updated>
    
    <content type="html">&lt;h1 id=&quot;OAuth2-0认证和授权原理解析&quot;&gt;&lt;a href=&quot;#OAuth2-0认证和授权原理解析&quot; class=&quot;headerlink&quot; title=&quot;OAuth2.0认证和授权原理解析&quot;&gt;&lt;/a&gt;OAuth2.0认证和授权原理解析&lt;/h1&gt;&lt;p&gt;OAuth是一个关于授权（authorization）的开放网络标准，在全世界得到广泛应用，目前的版本是2.0版。&lt;br&gt;本文对OAuth 2.0的设计思路和运行流程，做一个简明通俗的解释，主要参考材料为&lt;a href=&quot;http://www.rfcreader.com/#rfc6749&quot; title=&quot;rfc6749规范&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;RFC6749&lt;/a&gt;&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;应用场景&quot;&gt;&lt;a href=&quot;#应用场景&quot; class=&quot;headerlink&quot; title=&quot;应用场景&quot;&gt;&lt;/a&gt;应用场景&lt;/h2&gt;&lt;p&gt;为了理解适用场地，假设一个场景。&lt;br&gt;有一个叫”爱阅读”的应用，想要利用QQ众多的用户群，获取QQ用户的信息，关键问题是，腾讯是不会允许这款应用直接读取用户信息的，&lt;br&gt;另外一种方案是存储用户的qq账号和密码，通过登录获取信息，但是，直接存储用户名和密码是不安全的，一旦用户修改了qq密码，这个&lt;br&gt;应用也是不知道的，从而无法获取用户信息。尊重隐私权的考虑，也不应该在用户不知情的情况下直接读取用户信息。&lt;br&gt;OAuth就是为了解决上面这种场景诞生的。&lt;/p&gt;
&lt;h2 id=&quot;名词定义&quot;&gt;&lt;a href=&quot;#名词定义&quot; class=&quot;headerlink&quot; title=&quot;名词定义&quot;&gt;&lt;/a&gt;名词定义&lt;/h2&gt;&lt;p&gt;OAuth2.0定义了如下几个专业名词，理解这几个名词对理解后面的讲解至关重要。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Third-party application&lt;br&gt;第三方应用，又称client,客户端，即上一节提到的那个应用&lt;/li&gt;
&lt;li&gt;HTTP service&lt;br&gt;http服务提供方，即上一节所说的QQ&lt;/li&gt;
&lt;li&gt;Resource Owner&lt;br&gt;资源所有者，即QQ用户&lt;/li&gt;
&lt;li&gt;User Agent&lt;br&gt;用户代理，本文中就是指浏览器。&lt;/li&gt;
&lt;li&gt;Authorization server&lt;br&gt;认证服务器，即服务提供商专门用来处理认证的服务器。&lt;/li&gt;
&lt;li&gt;Resource server&lt;br&gt;资源服务器，即服务提供商存放用户生成的资源的服务器。它与认证服务器，可以是同一台服务器，也可以是不同的服务器。&lt;h2 id=&quot;OAuth的思路&quot;&gt;&lt;a href=&quot;#OAuth的思路&quot; class=&quot;headerlink&quot; title=&quot;OAuth的思路&quot;&gt;&lt;/a&gt;OAuth的思路&lt;/h2&gt;OAuth在客户端和资源提供方之间设置了一个授权层，客户端不能直接从资源提供方获取资源，只能先访问授权层，以此将用户和客户端区分开，&lt;br&gt;客户端访问资源所使用的令牌，与用户的密码不同，用户可以在登录的时候，指定授权层令牌的权限范围和有效期。客户端在访问用户资源时，&lt;br&gt;资源层根据令牌的访问范围和有效期，开放指定资源的访问权限&lt;h2 id=&quot;运行流程&quot;&gt;&lt;a href=&quot;#运行流程&quot; class=&quot;headerlink&quot; title=&quot;运行流程&quot;&gt;&lt;/a&gt;运行流程&lt;/h2&gt;OAuth2.0的运行流程如下，摘自&lt;a href=&quot;http://www.rfcreader.com/#rfc6749&quot; title=&quot;rfc6749规范&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;RFC6749&lt;/a&gt;.&lt;br&gt;&lt;img src=&quot;/images/oauth/oauth2liucheng.png&quot; alt=&quot;OAuth2.0的流程&quot;&gt;&lt;br&gt;(A) 用户打开客户端后，客户端要求用户提供授权的必要信息&lt;br&gt;(B) 用户同意给予授权&lt;br&gt;(C) 客户端使用上一步获得的授权，像认证服务器申请令牌&lt;br&gt;(D) 认证服务器对客户端认证，确认无误，发放访问令牌&lt;br&gt;(E) 客户端使用令牌，想资源服务器请求资源&lt;br&gt;(F) 资源服务器确认令牌，根据指定的有效期和访问范围，开放受保护的资源访问&lt;br&gt;上面的6个步骤中，B是关键，也就是客户端如何获取用户授权的问题，客户端只有拥有了用户授权，才能获取令牌，进而访问资源，下面&lt;br&gt;请看客户端获取用户授权的四种方式&lt;h2 id=&quot;客户端的授权模式&quot;&gt;&lt;a href=&quot;#客户端的授权模式&quot; class=&quot;headerlink&quot; title=&quot;客户端的授权模式&quot;&gt;&lt;/a&gt;客户端的授权模式&lt;/h2&gt;客户端必须得到用户的授权（authorization grant），才能获得令牌（access token）。OAuth2.0定义了四种授权方式&lt;/li&gt;
&lt;li&gt;授权码模式（authorization code）&lt;/li&gt;
&lt;li&gt;简化模式（implicit）&lt;/li&gt;
&lt;li&gt;密码模式（resource owner password credentials）&lt;/li&gt;
&lt;li&gt;客户端模式（client credentials）&lt;h3 id=&quot;授权码模式&quot;&gt;&lt;a href=&quot;#授权码模式&quot; class=&quot;headerlink&quot; title=&quot;授权码模式&quot;&gt;&lt;/a&gt;授权码模式&lt;/h3&gt;授权码模式（authorization code）是功能最完整、流程最严密的授权模式。它的特点就是通过客户端的后台服务器，与”服务提供商”的认证服务器进行互动。&lt;br&gt;&lt;img src=&quot;/images/oauth/authcode.png&quot; alt=&quot;授权码模式流程图&quot;&gt;&lt;br&gt;它的步骤如下：&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;（A）用户访问客户端，后者将前者导向认证服务器。&lt;/p&gt;
&lt;p&gt;（B）用户选择是否给予客户端授权。&lt;/p&gt;
&lt;p&gt;（C）假设用户给予授权，认证服务器将用户导向客户端事先指定的”重定向URI”（redirection URI），同时附上一个授权码。&lt;/p&gt;
&lt;p&gt;（D）客户端收到授权码，附上早先的”重定向URI”，向认证服务器申请令牌。这一步是在客户端的后台的服务器上完成的，对用户不可见。&lt;/p&gt;
&lt;p&gt;（E）认证服务器核对了授权码和重定向URI，确认无误后，向客户端发送访问令牌（access token）和更新令牌（refresh token）。&lt;/p&gt;
&lt;p&gt;下面是上面这些步骤所需要的参数。&lt;/p&gt;
&lt;p&gt;A步骤中，客户端申请认证的URI，包含以下参数：&lt;/p&gt;
&lt;p&gt;response_type：表示授权类型，必选项，此处的值固定为”code”&lt;br&gt;client_id：表示客户端的ID，必选项&lt;br&gt;redirect_uri：表示重定向URI，可选项&lt;br&gt;scope：表示申请的权限范围，可选项&lt;br&gt;state：表示客户端的当前状态，可以指定任意值，认证服务器会原封不动地返回这个值。&lt;br&gt;下面是一个例子。&lt;br&gt;&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;GET /authorize?response_type=code&amp;amp;amp;client_id=s6BhdRkqt3&amp;amp;amp;state=xyz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;amp;amp;redirect_uri=https%3A%2F%2Fclient%2Eexample%2Ecom%2Fcb HTTP/1.1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Host: server.example.com&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;C步骤中，服务器回应客户端的URI，包含以下参数：&lt;/p&gt;
&lt;p&gt;code：表示授权码，必选项。该码的有效期应该很短，通常设为10分钟，客户端只能使用该码一次，否则会被授权服务器拒绝。该码与客户端ID和重定向URI，是一一对应关系。&lt;br&gt;state：如果客户端的请求中包含这个参数，认证服务器的回应也必须一模一样包含这个参数。&lt;br&gt;下面是一个例子。&lt;br&gt;&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;HTTP/1.1 302 Found&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Location: &amp;lt;a href=&quot;https://client.example.com/cb&quot;&amp;gt;https://client.example.com/cb&amp;lt;/a&amp;gt;?code=SplxlOBeZQQYbYS6WxSbIA&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;amp;amp;state=xyz&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;D步骤中，客户端向认证服务器申请令牌的HTTP请求，包含以下参数：&lt;/p&gt;
&lt;p&gt;grant_type：表示使用的授权模式，必选项，此处的值固定为”authorization_code”。&lt;br&gt;code：表示上一步获得的授权码，必选项。&lt;br&gt;redirect_uri：表示重定向URI，必选项，且必须与A步骤中的该参数值保持一致。&lt;br&gt;client_id：表示客户端ID，必选项。&lt;br&gt;下面是一个例子。&lt;br&gt;&lt;figure class=&quot;highlight http&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;POST&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;/token&lt;/span&gt; HTTP/1.1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;Host&lt;/span&gt;: server.example.com&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;Authorization&lt;/span&gt;: Basic czZCaGRSa3F0MzpnWDFmQmF0M2JW&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;Content-Type&lt;/span&gt;: application/x-www-form-urlencoded&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;undefined&quot;&gt;grant_type=authorization_code&amp;amp;amp;code=SplxlOBeZQQYbYS6WxSbIA&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;amp;amp;redirect_uri=https%3A%2F%2Fclient%2Eexample%2Ecom%2Fcb&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;E步骤中，认证服务器发送的HTTP回复，包含以下参数：&lt;/p&gt;
&lt;p&gt;access_token：表示访问令牌，必选项。&lt;br&gt;token_type：表示令牌类型，该值大小写不敏感，必选项，可以是bearer类型或mac类型。&lt;br&gt;expires_in：表示过期时间，单位为秒。如果省略该参数，必须其他方式设置过期时间。&lt;br&gt;refresh_token：表示更新令牌，用来获取下一次的访问令牌，可选项。&lt;br&gt;scope：表示权限范围，如果与客户端申请的范围一致，此项可省略。&lt;br&gt;下面是一个例子。&lt;/p&gt;
&lt;p&gt;HTTP/1.1 200 OK&lt;br&gt;Content-Type: application/json;charset=UTF-8&lt;br&gt;Cache-Control: no-store&lt;br&gt;Pragma: no-cache&lt;br&gt;&lt;figure class=&quot;highlight json&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;&quot;access_token&quot;&lt;/span&gt;:&lt;span class=&quot;string&quot;&gt;&quot;2YotnFZFEjr1zCsicMWpAA&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;&quot;token_type&quot;&lt;/span&gt;:&lt;span class=&quot;string&quot;&gt;&quot;example&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;&quot;expires_in&quot;&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;3600&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;&quot;refresh_token&quot;&lt;/span&gt;:&lt;span class=&quot;string&quot;&gt;&quot;tGzv3JOkF0XG5Qx2TlKWIA&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;&quot;example_parameter&quot;&lt;/span&gt;:&lt;span class=&quot;string&quot;&gt;&quot;example_value&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;从上面代码可以看到，相关参数使用JSON格式发送（Content-Type: application/json）。此外，HTTP头信息中明确指定不得缓存。&lt;/p&gt;
&lt;h3 id=&quot;简化模式&quot;&gt;&lt;a href=&quot;#简化模式&quot; class=&quot;headerlink&quot; title=&quot;简化模式&quot;&gt;&lt;/a&gt;简化模式&lt;/h3&gt;&lt;p&gt;简化模式（implicit grant type）不通过第三方应用程序的服务器，直接在浏览器中向认证服务器申请令牌，跳过了”授权码”这个步骤，因此得名。所有步骤在浏览器中完成，令牌对访问者是可见的，且客户端不需要认证。&lt;br&gt;&lt;img src=&quot;/images/oauth/jianhua.png&quot; alt=&quot;简化模式流程图&quot;&gt;&lt;br&gt;它的步骤如下：&lt;/p&gt;
&lt;p&gt;（A）客户端将用户导向认证服务器。&lt;/p&gt;
&lt;p&gt;（B）用户决定是否给于客户端授权。&lt;/p&gt;
&lt;p&gt;（C）假设用户给予授权，认证服务器将用户导向客户端指定的”重定向URI”，并在URI的Hash部分包含了访问令牌。&lt;/p&gt;
&lt;p&gt;（D）浏览器向资源服务器发出请求，其中不包括上一步收到的Hash值。&lt;/p&gt;
&lt;p&gt;（E）资源服务器返回一个网页，其中包含的代码可以获取Hash值中的令牌。&lt;/p&gt;
&lt;p&gt;（F）浏览器执行上一步获得的脚本，提取出令牌。&lt;/p&gt;
&lt;p&gt;（G）浏览器将令牌发给客户端。&lt;/p&gt;
&lt;p&gt;下面是上面这些步骤所需要的参数。&lt;/p&gt;
&lt;p&gt;A步骤中，客户端发出的HTTP请求，包含以下参数：&lt;/p&gt;
&lt;p&gt;response_type：表示授权类型，此处的值固定为”token”，必选项。&lt;br&gt;client_id：表示客户端的ID，必选项。&lt;br&gt;redirect_uri：表示重定向的URI，可选项。&lt;br&gt;scope：表示权限范围，可选项。&lt;br&gt;state：表示客户端的当前状态，可以指定任意值，认证服务器会原封不动地返回这个值。&lt;br&gt;下面是一个例子。&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;GET /authorize?response_type=token&amp;amp;amp;client_id=s6BhdRkqt3&amp;amp;amp;state=xyz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;amp;amp;redirect_uri=https%3A%2F%2Fclient%2Eexample%2Ecom%2Fcb HTTP/1.1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Host: server.example.com&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;C步骤中，认证服务器回应客户端的URI，包含以下参数：&lt;/p&gt;
&lt;p&gt;access_token：表示访问令牌，必选项。&lt;br&gt;token_type：表示令牌类型，该值大小写不敏感，必选项。&lt;br&gt;expires_in：表示过期时间，单位为秒。如果省略该参数，必须其他方式设置过期时间。&lt;br&gt;scope：表示权限范围，如果与客户端申请的范围一致，此项可省略。&lt;br&gt;state：如果客户端的请求中包含这个参数，认证服务器的回应也必须一模一样包含这个参数。&lt;br&gt;下面是一个例子。&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;HTTP/1.1 302 Found&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Location: &amp;lt;a href=&amp;quot;http://example.com/cb&amp;quot;&amp;gt;http://example.com/cb&amp;lt;/a&amp;gt;#access_token=2YotnFZFEjr1zCsicMWpAA&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;amp;amp;state=xyz&amp;amp;amp;token_type=example&amp;amp;amp;expires_in=3600&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;在上面的例子中，认证服务器用HTTP头信息的Location栏，指定浏览器重定向的网址。注意，在这个网址的Hash部分包含了令牌。&lt;/p&gt;
&lt;p&gt;根据上面的D步骤，下一步浏览器会访问Location指定的网址，但是Hash部分不会发送。接下来的E步骤，服务提供商的资源服务器发送过来的代码，会提取出Hash中的令牌。&lt;/p&gt;
&lt;h3 id=&quot;密码模式&quot;&gt;&lt;a href=&quot;#密码模式&quot; class=&quot;headerlink&quot; title=&quot;密码模式&quot;&gt;&lt;/a&gt;密码模式&lt;/h3&gt;&lt;p&gt;密码模式（Resource Owner Password Credentials Grant）中，用户向客户端提供自己的用户名和密码。客户端使用这些信息，向”服务商提供商”索要授权。&lt;br&gt;在这种模式中，用户必须把自己的密码给客户端，但是客户端不得储存密码。这通常用在用户对客户端高度信任的情况下，比如客户端是操作系统的一部分，或者由一个著名公司出品。而认证服务器只有在其他授权模式无法执行的情况下，才能考虑使用这种模式。&lt;br&gt;&lt;img src=&quot;/images/oauth/mima.png&quot; alt=&quot;密码模式流程图&quot;&gt;&lt;br&gt;它的步骤如下：&lt;/p&gt;
&lt;p&gt;（A）用户向客户端提供用户名和密码。&lt;/p&gt;
&lt;p&gt;（B）客户端将用户名和密码发给认证服务器，向后者请求令牌。&lt;/p&gt;
&lt;p&gt;（C）认证服务器确认无误后，向客户端提供访问令牌。&lt;/p&gt;
&lt;p&gt;B步骤中，客户端发出的HTTP请求，包含以下参数：&lt;/p&gt;
&lt;p&gt;grant_type：表示授权类型，此处的值固定为”password”，必选项。&lt;br&gt;username：表示用户名，必选项。&lt;br&gt;password：表示用户的密码，必选项。&lt;br&gt;scope：表示权限范围，可选项。&lt;br&gt;下面是一个例子。&lt;/p&gt;
&lt;p&gt;POST /token HTTP/1.1&lt;br&gt;Host: server.example.com&lt;br&gt;Authorization: Basic czZCaGRSa3F0MzpnWDFmQmF0M2JW&lt;br&gt;Content-Type: application/x-www-form-urlencoded&lt;/p&gt;
&lt;p&gt;grant_type=password&amp;amp;username=johndoe&amp;amp;password=A3ddj3w&lt;/p&gt;
&lt;p&gt;C步骤中，认证服务器向客户端发送访问令牌，下面是一个例子。&lt;/p&gt;
&lt;p&gt;HTTP/1.1 200 OK&lt;br&gt;     Content-Type: application/json;charset=UTF-8&lt;br&gt;     Cache-Control: no-store&lt;br&gt;     Pragma: no-cache&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;{
  &amp;quot;access_token&amp;quot;:&amp;quot;2YotnFZFEjr1zCsicMWpAA&amp;quot;,
  &amp;quot;token_type&amp;quot;:&amp;quot;example&amp;quot;,
  &amp;quot;expires_in&amp;quot;:3600,
  &amp;quot;refresh_token&amp;quot;:&amp;quot;tGzv3JOkF0XG5Qx2TlKWIA&amp;quot;,
  &amp;quot;example_parameter&amp;quot;:&amp;quot;example_value&amp;quot;
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;上面代码中，各个参数的含义参见《授权码模式》一节。&lt;/p&gt;
&lt;p&gt;整个过程中，客户端不得保存用户的密码。&lt;/p&gt;
&lt;h3 id=&quot;客户端模式&quot;&gt;&lt;a href=&quot;#客户端模式&quot; class=&quot;headerlink&quot; title=&quot;客户端模式&quot;&gt;&lt;/a&gt;客户端模式&lt;/h3&gt;&lt;p&gt;客户端模式（Client Credentials Grant）指客户端以自己的名义，而不是以用户的名义，向”服务提供商”进行认证。严格地说，客户端模式并不属于OAuth框架所要解决的问题。在这种模式中，用户直接向客户端注册，客户端以自己的名义要求”服务提供商”提供服务，其实不存在授权问题。&lt;br&gt;&lt;img src=&quot;/images/oauth/client.png&quot; alt=&quot;客户端模式流程图&quot;&gt;&lt;br&gt;它的步骤如下：&lt;/p&gt;
&lt;p&gt;（A）客户端向认证服务器进行身份认证，并要求一个访问令牌。&lt;/p&gt;
&lt;p&gt;（B）认证服务器确认无误后，向客户端提供访问令牌。&lt;/p&gt;
&lt;p&gt;A步骤中，客户端发出的HTTP请求，包含以下参数：&lt;/p&gt;
&lt;p&gt;granttype：表示授权类型，此处的值固定为”clientcredentials”，必选项。&lt;br&gt;scope：表示权限范围，可选项。&lt;br&gt;POST /token HTTP/1.1&lt;br&gt;Host: server.example.com&lt;br&gt;Authorization: Basic czZCaGRSa3F0MzpnWDFmQmF0M2JW&lt;br&gt;Content-Type: application/x-www-form-urlencoded&lt;/p&gt;
&lt;p&gt;grant_type=client_credentials&lt;/p&gt;
&lt;p&gt;认证服务器必须以某种方式，验证客户端身份。&lt;/p&gt;
&lt;p&gt;B步骤中，认证服务器向客户端发送访问令牌，下面是一个例子。&lt;/p&gt;
&lt;p&gt;HTTP/1.1 200 OK&lt;br&gt;     Content-Type: application/json;charset=UTF-8&lt;br&gt;     Cache-Control: no-store&lt;br&gt;     Pragma: no-cache&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;{
  &amp;quot;access_token&amp;quot;:&amp;quot;2YotnFZFEjr1zCsicMWpAA&amp;quot;,
  &amp;quot;token_type&amp;quot;:&amp;quot;example&amp;quot;,
  &amp;quot;expires_in&amp;quot;:3600,
  &amp;quot;example_parameter&amp;quot;:&amp;quot;example_value&amp;quot;
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;上面代码中，各个参数的含义参见《授权码模式》一节。&lt;/p&gt;
&lt;h2 id=&quot;更新令牌&quot;&gt;&lt;a href=&quot;#更新令牌&quot; class=&quot;headerlink&quot; title=&quot;更新令牌&quot;&gt;&lt;/a&gt;更新令牌&lt;/h2&gt;&lt;p&gt;如果用户访问的时候，客户端的”访问令牌”已经过期，则需要使用”更新令牌”申请一个新的访问令牌。&lt;/p&gt;
&lt;p&gt;客户端发出更新令牌的HTTP请求，包含以下参数：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;granttype：表示使用的授权模式，此处的值固定为”refreshtoken”，必选项。&lt;/li&gt;
&lt;li&gt;refresh_token：表示早前收到的更新令牌，必选项。&lt;/li&gt;
&lt;li&gt;scope：表示申请的授权范围，不可以超出上一次申请的范围，如果省略该参数，则表示与上一次一致。&lt;br&gt;下面是一个例子。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;POST /token HTTP/1.1&lt;br&gt;Host: server.example.com&lt;br&gt;Authorization: Basic czZCaGRSa3F0MzpnWDFmQmF0M2JW&lt;br&gt;Content-Type: application/x-www-form-urlencoded&lt;/p&gt;
&lt;p&gt;grant_type=refresh_token&amp;amp;refresh_token=tGzv3JOkF0XG5Qx2TlKWIA&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;OAuth2-0认证和授权原理解析&quot;&gt;&lt;a href=&quot;#OAuth2-0认证和授权原理解析&quot; class=&quot;headerlink&quot; title=&quot;OAuth2.0认证和授权原理解析&quot;&gt;&lt;/a&gt;OAuth2.0认证和授权原理解析&lt;/h1&gt;&lt;p&gt;OAuth是一个关于授权（authorization）的开放网络标准，在全世界得到广泛应用，目前的版本是2.0版。&lt;br&gt;本文对OAuth 2.0的设计思路和运行流程，做一个简明通俗的解释，主要参考材料为&lt;a href=&quot;http://www.rfcreader.com/#rfc6749&quot; title=&quot;rfc6749规范&quot;&gt;RFC6749&lt;/a&gt;&lt;br&gt;
    
    </summary>
    
      <category term="OAuth2" scheme="http://pengjieran.github.io/categories/OAuth2/"/>
    
    
      <category term="OAuth2" scheme="http://pengjieran.github.io/tags/OAuth2/"/>
    
      <category term="oauth2认证原理" scheme="http://pengjieran.github.io/tags/oauth2%E8%AE%A4%E8%AF%81%E5%8E%9F%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>redis参数配置</title>
    <link href="http://pengjieran.github.io/2016/04/25/redis%E5%8F%82%E6%95%B0%E9%85%8D%E7%BD%AE/"/>
    <id>http://pengjieran.github.io/2016/04/25/redis参数配置/</id>
    <published>2016-04-25T13:29:19.000Z</published>
    <updated>2016-05-01T14:19:26.383Z</updated>
    
    <content type="html">&lt;h1 id=&quot;redis配置&quot;&gt;&lt;a href=&quot;#redis配置&quot; class=&quot;headerlink&quot; title=&quot;redis配置&quot;&gt;&lt;/a&gt;redis配置&lt;/h1&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;基本配置说明&quot;&gt;&lt;a href=&quot;#基本配置说明&quot; class=&quot;headerlink&quot; title=&quot;基本配置说明&quot;&gt;&lt;/a&gt;基本配置说明&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 1k =&amp;gt; 1000 bytes&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 1kb =&amp;gt; 1024 bytes&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 1m =&amp;gt; 1000000 bytes&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 1mb =&amp;gt; 1024*1024 bytes&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 1g =&amp;gt; 1000000000 bytes&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 1gb =&amp;gt; 1024*1024*1024 bytes&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;redis默认不是以搜狐进程的方式运行，可以通过该配置项修改，使用yes启用守护进程&quot;&gt;&lt;a href=&quot;#redis默认不是以搜狐进程的方式运行，可以通过该配置项修改，使用yes启用守护进程&quot; class=&quot;headerlink&quot; title=&quot;redis默认不是以搜狐进程的方式运行，可以通过该配置项修改，使用yes启用守护进程&quot;&gt;&lt;/a&gt;redis默认不是以搜狐进程的方式运行，可以通过该配置项修改，使用yes启用守护进程&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;daemonize yes&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;当redis以守护进程方式运行时，redis默认会把pid写入-var-run-redis-pid文件，可以通过pidfile指定&quot;&gt;&lt;a href=&quot;#当redis以守护进程方式运行时，redis默认会把pid写入-var-run-redis-pid文件，可以通过pidfile指定&quot; class=&quot;headerlink&quot; title=&quot;当redis以守护进程方式运行时，redis默认会把pid写入/var/run/redis.pid文件，可以通过pidfile指定&quot;&gt;&lt;/a&gt;当redis以守护进程方式运行时，redis默认会把pid写入/var/run/redis.pid文件，可以通过pidfile指定&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;pidfile /var/run/redis.pid&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;指定redis监听端口，默认端口是6379-作者在自己的一篇博文中解释了为什么选用6379作为默认端口，因为6379在手机按键上MERZ对应的号码，而MERZ取自意大利歌女Alessia-Merz的名字&quot;&gt;&lt;a href=&quot;#指定redis监听端口，默认端口是6379-作者在自己的一篇博文中解释了为什么选用6379作为默认端口，因为6379在手机按键上MERZ对应的号码，而MERZ取自意大利歌女Alessia-Merz的名字&quot; class=&quot;headerlink&quot; title=&quot;指定redis监听端口，默认端口是6379, 作者在自己的一篇博文中解释了为什么选用6379作为默认端口，因为6379在手机按键上MERZ对应的号码，而MERZ取自意大利歌女Alessia Merz的名字&quot;&gt;&lt;/a&gt;指定redis监听端口，默认端口是6379, 作者在自己的一篇博文中解释了为什么选用6379作为默认端口，因为6379在手机按键上MERZ对应的号码，而MERZ取自意大利歌女Alessia Merz的名字&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;port 6379&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;绑定的主机地址&quot;&gt;&lt;a href=&quot;#绑定的主机地址&quot; class=&quot;headerlink&quot; title=&quot;绑定的主机地址&quot;&gt;&lt;/a&gt;绑定的主机地址&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;bind&lt;/span&gt; 127.0.0.1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;当客户端闲置多长时间后关闭连接，如果指定为0，表示关闭该功能&quot;&gt;&lt;a href=&quot;#当客户端闲置多长时间后关闭连接，如果指定为0，表示关闭该功能&quot; class=&quot;headerlink&quot; title=&quot;当客户端闲置多长时间后关闭连接，如果指定为0，表示关闭该功能&quot;&gt;&lt;/a&gt;当客户端闲置多长时间后关闭连接，如果指定为0，表示关闭该功能&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;timeout 300&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;指定日志记录级别，Redis总共支持四个级别：debug、verbose、notice、warning，默认为verbose&quot;&gt;&lt;a href=&quot;#指定日志记录级别，Redis总共支持四个级别：debug、verbose、notice、warning，默认为verbose&quot; class=&quot;headerlink&quot; title=&quot;指定日志记录级别，Redis总共支持四个级别：debug、verbose、notice、warning，默认为verbose&quot;&gt;&lt;/a&gt;指定日志记录级别，Redis总共支持四个级别：debug、verbose、notice、warning，默认为verbose&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;loglevel verbose&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;日志记录方式，默认为标准输出，如果配置Redis为守护进程方式运行，而这里又配置为日志记录方式为标准输出，则日志将会发送给-dev-null&quot;&gt;&lt;a href=&quot;#日志记录方式，默认为标准输出，如果配置Redis为守护进程方式运行，而这里又配置为日志记录方式为标准输出，则日志将会发送给-dev-null&quot; class=&quot;headerlink&quot; title=&quot;日志记录方式，默认为标准输出，如果配置Redis为守护进程方式运行，而这里又配置为日志记录方式为标准输出，则日志将会发送给/dev/null&quot;&gt;&lt;/a&gt;日志记录方式，默认为标准输出，如果配置Redis为守护进程方式运行，而这里又配置为日志记录方式为标准输出，则日志将会发送给/dev/null&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;logfile stdout&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;设置数据库的数量，默认数据库为0，可以使用SELECT-命令在连接上指定数据库id&quot;&gt;&lt;a href=&quot;#设置数据库的数量，默认数据库为0，可以使用SELECT-命令在连接上指定数据库id&quot; class=&quot;headerlink&quot; title=&quot;设置数据库的数量，默认数据库为0，可以使用SELECT 命令在连接上指定数据库id&quot;&gt;&lt;/a&gt;设置数据库的数量，默认数据库为0，可以使用SELECT &lt;dbid&gt;命令在连接上指定数据库id&lt;/dbid&gt;&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;databases 16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;指定在多长时间内，有多少次更新操作，就将数据同步到数据文件，可以多个条件配合&quot;&gt;&lt;a href=&quot;#指定在多长时间内，有多少次更新操作，就将数据同步到数据文件，可以多个条件配合&quot; class=&quot;headerlink&quot; title=&quot;指定在多长时间内，有多少次更新操作，就将数据同步到数据文件，可以多个条件配合&quot;&gt;&lt;/a&gt;指定在多长时间内，有多少次更新操作，就将数据同步到数据文件，可以多个条件配合&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;save &amp;lt;seconds&amp;gt; &amp;lt;changes&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Redis默认配置文件中提供了三个条件：&quot;&gt;&lt;a href=&quot;#Redis默认配置文件中提供了三个条件：&quot; class=&quot;headerlink&quot; title=&quot;Redis默认配置文件中提供了三个条件：&quot;&gt;&lt;/a&gt;Redis默认配置文件中提供了三个条件：&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;save 900 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;save 300 10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;save 60 10000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 分别表示900秒（15分钟）内有1个更改，300秒（5分钟）内有10个更改以及60秒内有10000个更改。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;指定存储至本地数据库时是否压缩数据，默认为yes，Redis采用LZF压缩，如果为了节省CPU时间，可以关闭该选项，但会导致数据库文件变的巨大&quot;&gt;&lt;a href=&quot;#指定存储至本地数据库时是否压缩数据，默认为yes，Redis采用LZF压缩，如果为了节省CPU时间，可以关闭该选项，但会导致数据库文件变的巨大&quot; class=&quot;headerlink&quot; title=&quot;指定存储至本地数据库时是否压缩数据，默认为yes，Redis采用LZF压缩，如果为了节省CPU时间，可以关闭该选项，但会导致数据库文件变的巨大&quot;&gt;&lt;/a&gt;指定存储至本地数据库时是否压缩数据，默认为yes，Redis采用LZF压缩，如果为了节省CPU时间，可以关闭该选项，但会导致数据库文件变的巨大&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;rdbcompression yes&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;指定本地数据库文件名，默认值为dump-rdb&quot;&gt;&lt;a href=&quot;#指定本地数据库文件名，默认值为dump-rdb&quot; class=&quot;headerlink&quot; title=&quot;指定本地数据库文件名，默认值为dump.rdb&quot;&gt;&lt;/a&gt;指定本地数据库文件名，默认值为dump.rdb&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;dbfilename dump.rdb&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;指定本地数据库存放目录&quot;&gt;&lt;a href=&quot;#指定本地数据库存放目录&quot; class=&quot;headerlink&quot; title=&quot;指定本地数据库存放目录&quot;&gt;&lt;/a&gt;指定本地数据库存放目录&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;dir ./&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;设置当本机为slave服务时，设置master服务的IP地址及端口，在Redis启动时，它会自动从master进行数据同步&quot;&gt;&lt;a href=&quot;#设置当本机为slave服务时，设置master服务的IP地址及端口，在Redis启动时，它会自动从master进行数据同步&quot; class=&quot;headerlink&quot; title=&quot;设置当本机为slave服务时，设置master服务的IP地址及端口，在Redis启动时，它会自动从master进行数据同步&quot;&gt;&lt;/a&gt;设置当本机为slave服务时，设置master服务的IP地址及端口，在Redis启动时，它会自动从master进行数据同步&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;slaveof &amp;lt;masterip&amp;gt; &amp;lt;masterport&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;当master服务设置了密码保护时，slave服务连接master的密码&quot;&gt;&lt;a href=&quot;#当master服务设置了密码保护时，slave服务连接master的密码&quot; class=&quot;headerlink&quot; title=&quot;当master服务设置了密码保护时，slave服务连接master的密码&quot;&gt;&lt;/a&gt;当master服务设置了密码保护时，slave服务连接master的密码&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;masterauth &amp;lt;master-password&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;设置Redis连接密码，如果配置了连接密码，客户端在连接Redis时需要通过AUTH-命令提供密码，默认关闭&quot;&gt;&lt;a href=&quot;#设置Redis连接密码，如果配置了连接密码，客户端在连接Redis时需要通过AUTH-命令提供密码，默认关闭&quot; class=&quot;headerlink&quot; title=&quot;设置Redis连接密码，如果配置了连接密码，客户端在连接Redis时需要通过AUTH 命令提供密码，默认关闭&quot;&gt;&lt;/a&gt;设置Redis连接密码，如果配置了连接密码，客户端在连接Redis时需要通过AUTH &lt;password&gt;命令提供密码，默认关闭&lt;/password&gt;&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;requirepass foobared&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;设置同一时间最大客户端连接数，默认无限制，Redis可以同时打开的客户端连接数为Redis进程可以打开的最大文件描述符数，如果设置-maxclients-0，表示不作限制。当客户端连接数到达限制时，Redis会关闭新的连接并向客户端返回max-number-of-clients-reached错误信息&quot;&gt;&lt;a href=&quot;#设置同一时间最大客户端连接数，默认无限制，Redis可以同时打开的客户端连接数为Redis进程可以打开的最大文件描述符数，如果设置-maxclients-0，表示不作限制。当客户端连接数到达限制时，Redis会关闭新的连接并向客户端返回max-number-of-clients-reached错误信息&quot; class=&quot;headerlink&quot; title=&quot;设置同一时间最大客户端连接数，默认无限制，Redis可以同时打开的客户端连接数为Redis进程可以打开的最大文件描述符数，如果设置 maxclients 0，表示不作限制。当客户端连接数到达限制时，Redis会关闭新的连接并向客户端返回max number of clients reached错误信息&quot;&gt;&lt;/a&gt;设置同一时间最大客户端连接数，默认无限制，Redis可以同时打开的客户端连接数为Redis进程可以打开的最大文件描述符数，如果设置 maxclients 0，表示不作限制。当客户端连接数到达限制时，Redis会关闭新的连接并向客户端返回max number of clients reached错误信息&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;maxclients 128&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;指定Redis最大内存限制，Redis在启动时会把数据加载到内存中，达到最大内存后，Redis会先尝试清除已到期或即将到期的Key，当此方法处理-后，仍然到达最大内存设置，将无法再进行写入操作，但仍然可以进行读取操作。Redis新的vm机制，会把Key存放内存，Value会存放在swap区&quot;&gt;&lt;a href=&quot;#指定Redis最大内存限制，Redis在启动时会把数据加载到内存中，达到最大内存后，Redis会先尝试清除已到期或即将到期的Key，当此方法处理-后，仍然到达最大内存设置，将无法再进行写入操作，但仍然可以进行读取操作。Redis新的vm机制，会把Key存放内存，Value会存放在swap区&quot; class=&quot;headerlink&quot; title=&quot;指定Redis最大内存限制，Redis在启动时会把数据加载到内存中，达到最大内存后，Redis会先尝试清除已到期或即将到期的Key，当此方法处理 后，仍然到达最大内存设置，将无法再进行写入操作，但仍然可以进行读取操作。Redis新的vm机制，会把Key存放内存，Value会存放在swap区&quot;&gt;&lt;/a&gt;指定Redis最大内存限制，Redis在启动时会把数据加载到内存中，达到最大内存后，Redis会先尝试清除已到期或即将到期的Key，当此方法处理 后，仍然到达最大内存设置，将无法再进行写入操作，但仍然可以进行读取操作。Redis新的vm机制，会把Key存放内存，Value会存放在swap区&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;maxmemory &amp;lt;bytes&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;指定是否在每次更新操作后进行日志记录，Redis在默认情况下是异步的把数据写入磁盘，如果不开启，可能会在断电时导致一段时间内的数据丢失。因为-redis本身同步数据文件是按上面save条件来同步的，所以有的数据会在一段时间内只存在于内存中。默认为no&quot;&gt;&lt;a href=&quot;#指定是否在每次更新操作后进行日志记录，Redis在默认情况下是异步的把数据写入磁盘，如果不开启，可能会在断电时导致一段时间内的数据丢失。因为-redis本身同步数据文件是按上面save条件来同步的，所以有的数据会在一段时间内只存在于内存中。默认为no&quot; class=&quot;headerlink&quot; title=&quot;指定是否在每次更新操作后进行日志记录，Redis在默认情况下是异步的把数据写入磁盘，如果不开启，可能会在断电时导致一段时间内的数据丢失。因为 redis本身同步数据文件是按上面save条件来同步的，所以有的数据会在一段时间内只存在于内存中。默认为no&quot;&gt;&lt;/a&gt;指定是否在每次更新操作后进行日志记录，Redis在默认情况下是异步的把数据写入磁盘，如果不开启，可能会在断电时导致一段时间内的数据丢失。因为 redis本身同步数据文件是按上面save条件来同步的，所以有的数据会在一段时间内只存在于内存中。默认为no&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;appendonly no&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;指定更新日志文件名，默认为appendonly-aof&quot;&gt;&lt;a href=&quot;#指定更新日志文件名，默认为appendonly-aof&quot; class=&quot;headerlink&quot; title=&quot;指定更新日志文件名，默认为appendonly.aof&quot;&gt;&lt;/a&gt;指定更新日志文件名，默认为appendonly.aof&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;appendfilename appendonly.aof&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;指定更新日志条件，共有3个可选值：&quot;&gt;&lt;a href=&quot;#指定更新日志条件，共有3个可选值：&quot; class=&quot;headerlink&quot; title=&quot;指定更新日志条件，共有3个可选值：&quot;&gt;&lt;/a&gt;指定更新日志条件，共有3个可选值：&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# no：表示等操作系统进行数据缓存同步到磁盘（快）&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# always：表示每次更新操作后手动调用fsync()将数据写到磁盘（慢，安全）&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# everysec：表示每秒同步一次（折衷，默认值）&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;appendfsync everysec&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;设置在向客户端应答时，是否把较小的包合并为一个包发送，默认为开启&quot;&gt;&lt;a href=&quot;#设置在向客户端应答时，是否把较小的包合并为一个包发送，默认为开启&quot; class=&quot;headerlink&quot; title=&quot;设置在向客户端应答时，是否把较小的包合并为一个包发送，默认为开启&quot;&gt;&lt;/a&gt;设置在向客户端应答时，是否把较小的包合并为一个包发送，默认为开启&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;glueoutputbuf yes&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;指定在超过一定的数量或者最大的元素超过某一临界值时，采用一种特殊的哈希算法&quot;&gt;&lt;a href=&quot;#指定在超过一定的数量或者最大的元素超过某一临界值时，采用一种特殊的哈希算法&quot; class=&quot;headerlink&quot; title=&quot;指定在超过一定的数量或者最大的元素超过某一临界值时，采用一种特殊的哈希算法&quot;&gt;&lt;/a&gt;指定在超过一定的数量或者最大的元素超过某一临界值时，采用一种特殊的哈希算法&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;hash&lt;/span&gt;-max-zipmap-entries 64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;hash&lt;/span&gt;-max-zipmap-value 512&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;指定是否激活重置哈希，默认为开启（后面在介绍Redis的哈希算法时具体介绍）&quot;&gt;&lt;a href=&quot;#指定是否激活重置哈希，默认为开启（后面在介绍Redis的哈希算法时具体介绍）&quot; class=&quot;headerlink&quot; title=&quot;指定是否激活重置哈希，默认为开启（后面在介绍Redis的哈希算法时具体介绍）&quot;&gt;&lt;/a&gt;指定是否激活重置哈希，默认为开启（后面在介绍Redis的哈希算法时具体介绍）&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;activerehashing yes&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;指定包含其它的配置文件，可以在同一主机上多个Redis实例之间使用同一份配置文件，而同时各个实例又拥有自己的特定配置文件&quot;&gt;&lt;a href=&quot;#指定包含其它的配置文件，可以在同一主机上多个Redis实例之间使用同一份配置文件，而同时各个实例又拥有自己的特定配置文件&quot; class=&quot;headerlink&quot; title=&quot;指定包含其它的配置文件，可以在同一主机上多个Redis实例之间使用同一份配置文件，而同时各个实例又拥有自己的特定配置文件&quot;&gt;&lt;/a&gt;指定包含其它的配置文件，可以在同一主机上多个Redis实例之间使用同一份配置文件，而同时各个实例又拥有自己的特定配置文件&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;include /path/to/local.conf&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;redis配置&quot;&gt;&lt;a href=&quot;#redis配置&quot; class=&quot;headerlink&quot; title=&quot;redis配置&quot;&gt;&lt;/a&gt;redis配置&lt;/h1&gt;
    
    </summary>
    
      <category term="redis" scheme="http://pengjieran.github.io/categories/redis/"/>
    
    
      <category term="redis参数配置" scheme="http://pengjieran.github.io/tags/redis%E5%8F%82%E6%95%B0%E9%85%8D%E7%BD%AE/"/>
    
  </entry>
  
  <entry>
    <title>mysql配置参数详解</title>
    <link href="http://pengjieran.github.io/2016/03/25/mysql%E9%85%8D%E7%BD%AE%E5%8F%82%E6%95%B0%E8%AF%A6%E8%A7%A3/"/>
    <id>http://pengjieran.github.io/2016/03/25/mysql配置参数详解/</id>
    <published>2016-03-25T14:20:19.000Z</published>
    <updated>2016-05-01T13:58:44.301Z</updated>
    
    <content type="html">&lt;h1 id=&quot;mysql配置参数详解&quot;&gt;&lt;a href=&quot;#mysql配置参数详解&quot; class=&quot;headerlink&quot; title=&quot;mysql配置参数详解&quot;&gt;&lt;/a&gt;mysql配置参数详解&lt;/h1&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;my.ini（Linux系统下是my.cnf）,当mysql服务器启动时它会读取这个文件，设置相关的运行环境参数。&lt;br&gt;&lt;/p&gt;&lt;p&gt;my.ini分为两块：Client Section和Server Section。Client Section用来配置MySQL客户端参数。要查看配置参数可以用下面的命令：&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;show variables like &lt;span class=&quot;string&quot;&gt;&#39;%innodb%&#39;&lt;/span&gt;; &lt;span class=&quot;comment&quot;&gt;# 查看innodb相关配置参数&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;show status like &lt;span class=&quot;string&quot;&gt;&#39;%innodb%&#39;&lt;/span&gt;; &lt;span class=&quot;comment&quot;&gt;# 查看innodb相关的运行时参数（比如当前正在打开的表的数量，当前已经打开的表的数量）&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;show global status like &lt;span class=&quot;string&quot;&gt;&#39;open%tables&#39;&lt;/span&gt;; &lt;span class=&quot;comment&quot;&gt;# 查看全局的运行时参数，加上global是对当前mysql服务器中运行的所有数据库实例进行统&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#计。不加global则只对当前数据库实例进行统计。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;&lt;br&gt;1. Client Section&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[client]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;port = 3306 &lt;span class=&quot;comment&quot;&gt;#设置mysql客户端连接服务端时默认使用的端口&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[mysql]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;default-character-set=utf8 &lt;span class=&quot;comment&quot;&gt;#设置mysql客户端默认字符集&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;&lt;br&gt;2. Server Section&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[mysqld]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;port=3306 &lt;span class=&quot;comment&quot;&gt;#mysql服务端默认监听(listen on)的TCP/IP端口&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;basedir=&lt;span class=&quot;string&quot;&gt;&quot;C:/Program Files/MySQL/MySQL5.5/&quot;&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;# 基准路径，其他路径都相对于这个路径&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;datadir=&lt;span class=&quot;string&quot;&gt;&quot;C:/Program Files/MySQL/MySQL Server 5.5/Data&quot;&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;# mysql数据库文件所在目录&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;character-set-server=latin1 &lt;span class=&quot;comment&quot;&gt;# 服务端使用的字符集默认为8比特编码的latin1字符集&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;default-storage-engine=INNODB &lt;span class=&quot;comment&quot;&gt;# 创建新表时将使用的默认存储引擎&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sql-mode=&lt;span class=&quot;string&quot;&gt;&quot;STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION&quot;&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;# SQL模式为strict模式&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;max_connections=100 &lt;span class=&quot;comment&quot;&gt;# mysql服务器支持的最大并发连接数（用户数）。但总会预留其中的一个连接给管理员使用超级权限登录，即使&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#连接数目达到最大限制。如果设置得过小而用户比较多，会经常出现“Too many connections”错误。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;query_cache_size=0 &lt;span class=&quot;comment&quot;&gt;# 查询缓存大小，用于缓存SELECT查询结果。如果有许多返回相同查询结果的SELECT查询，并且很少改变表，可以&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#设置query_cache_size大于0，可以极大改善查询效率。而如果表数据频繁变化，就不要使用这个，会适得其反&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;table_cache=256 &lt;span class=&quot;comment&quot;&gt;# 这个参数在5.1.3之后的版本中叫做table_open_cache，用于设置table高速缓存的数量。由于每个客户端连接都会至&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#少访问一个表，因此此参数的值与max_connections有关。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#当某一连接访问一个表时，MySQL会检查当前已缓存表的数量。如果该表已经在缓存中打开，则会直接访问缓存中的表已加快查询速度；&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#如果该表未被缓存，则会将当前的表添加进缓存并进行查询。在执行缓存操作之前，table_cache用于限制缓存表的最大数目：如果当前&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#已经缓存的表未达到table_cache，则会将新表添加进来；若已经达到此值，MySQL将根据缓存表的最后查询时间、查询率等规则释放之&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#前的缓存。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tmp_table_size=34M &lt;span class=&quot;comment&quot;&gt;# 内存中的每个临时表允许的最大大小。如果临时表大小超过该值，临时表将自动转为基于磁盘的表（Disk Based Table）。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;thread_cache_size=8 &lt;span class=&quot;comment&quot;&gt;# 缓存的最大线程数。当客户端连接断开时，如果客户端总连接数小于该值，则处理客户端任务的线程放回缓存。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 在高并发情况下，如果该值设置得太小，就会有很多线程频繁创建，线程创建的开销会变大，查询效率也会下降。一般来说如果在应用&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 端有良好的多线程处理，这个参数对性能不会有太大的提高。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# MyISAM相关参数&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;myisam_max_sort_file_size=100G &lt;span class=&quot;comment&quot;&gt;# mysql重建索引时允许使用的临时文件最大大小&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;myisam_sort_buffer_size=68M&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;key_buffer_size=54M &lt;span class=&quot;comment&quot;&gt;# Key Buffer大小，用于缓存MyISAM表的索引块。决定数据库索引处理的速度（尤其是索引读）&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;read&lt;/span&gt;_buffer_size=64K &lt;span class=&quot;comment&quot;&gt;# 用于对MyISAM表全表扫描时使用的缓冲区大小。针对每个线程进行分配（前提是进行了全表扫描）。进行排序&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 查询时，MySql会首先扫描一遍该缓冲，以避免磁盘搜索，提高查询速度，如果需要排序大量数据，可适当调高该值。但MySql会为每个&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 客户连接发放该缓冲空间，所以应尽量适当设置该值，以避免内存开销过大。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;read&lt;/span&gt;_rnd_buffer_size=256K&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sort_buffer_size=256K &lt;span class=&quot;comment&quot;&gt;# connection级参数（为每个线程配置），500个线程将消耗500*256K的sort_buffer_size。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# InnoDB相关参数&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;innodb_additional_mem_pool_size=3M &lt;span class=&quot;comment&quot;&gt;# InnoDB用于存储元数据信息的内存池大小，一般不需修改&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;innodb_flush_&lt;span class=&quot;built_in&quot;&gt;log&lt;/span&gt;_at_trx_commit =1 &lt;span class=&quot;comment&quot;&gt;# 事务相关参数，如果值为1，则InnoDB在每次commit都会将事务日志写入磁盘（磁盘IO消耗较大），&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 这样保证了完全的ACID特性。而如果设置为0，则表示事务日志写入内存log和内存log写入磁盘的频率都为1次/秒。如果设为2则表示事&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 务日志在每次commit都写入内存log，但内存log写入磁盘的频率为1次/秒。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;innodb_&lt;span class=&quot;built_in&quot;&gt;log&lt;/span&gt;_buffer_size=2M &lt;span class=&quot;comment&quot;&gt;# InnoDB日志数据缓冲大小，如果缓冲满了，就会将缓冲中的日志数据写入磁盘（flush）。由于一般至少&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 都1秒钟会写一次磁盘，所以没必要设置过大，即使是长事务。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;innodb_buffer_pool_size=105M &lt;span class=&quot;comment&quot;&gt;# InnoDB使用缓冲池来缓存索引和行数据。该值设置的越大，则磁盘IO越少。一般将该值设为物理内存的80%。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;innodb_&lt;span class=&quot;built_in&quot;&gt;log&lt;/span&gt;_file_size=53M &lt;span class=&quot;comment&quot;&gt;# 每一个InnoDB事务日志的大小。一般设为innodb_buffer_pool_size的25%到100%&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;innodb_thread_concurrency=9 &lt;span class=&quot;comment&quot;&gt;# InnoDB内核最大并发线程数。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;在Apache, PHP, MySQL的体系架构中，MySQL对于性能的影响最大，也是关键的核心部分。对于Discuz!论坛程序也是如此，MySQL的设&lt;br&gt;置是否合理优化，直接影响到论坛的速度和承载量！同时，MySQL也是优化难度最大的一个部分，不但需要理解一些MySQL专业知识，同时&lt;br&gt;还需要长时间的观察统计并且根据经验进行判断，然后设置合理的参数。 下面我们了解一下MySQL优化的一些基础，MySQL的优化我分为&lt;br&gt;两个部分，一是服务器物理硬件的优化，二是MySQL自身(my.cnf)的优化。 &lt;br&gt;&lt;strong&gt;一、服务器硬件对MySQL性能的影响 &lt;br&gt;&lt;/strong&gt;&lt;br&gt;1. 磁盘寻道能力（磁盘I/O）,以目前高转速SCSI硬盘(7200转/秒)为例，这种硬盘理论上每秒寻道7200次，这是物理特性决定的，没有办&lt;br&gt;法改变。MySQL每秒钟都在进行大量、复杂的查询操作，对磁盘的读写量可想而知。所以，通常认为磁盘I/O是制约MySQL性能的最大因素之一，&lt;br&gt;对于日均访问量在100万PV以上的Discuz!论坛，由于磁盘I/O的制约，MySQL的性能会非常低下！解决这一制约因素可以考虑以下几&lt;br&gt;种解决方案： 使用RAID-0+1磁盘阵列，注意不要尝试使用RAID-5，MySQL在RAID-5磁盘阵列上的效率不会像你期待的那样快。 &lt;br&gt;2. CPU&lt;br&gt;对于MySQL应用，推荐使用S.M.P.架构的多路对称CPU，例如：可以使用两颗Intel Xeon 3.6GHz的CPU，现在我较推荐用4U的服务器来专门&lt;br&gt;做数据库服务器，不仅仅是针对于mysql。 &lt;br&gt;3. 物理内存对于一台使用MySQL的Database Server来说，服务器内存建议不要小于2GB，&lt;br&gt;推荐使用4GB以上的物理内存，不过内存对于现在的服务器而言可以说是一个可以忽略的问题，工作中遇到了高端服务器基本上内存都超&lt;br&gt;过了16G。 &lt;br&gt;&lt;br&gt;二、MySQL自身因素当解决了上述服务器硬件制约因素后，让我们看看MySQL自身的优化是如何操作的。对MySQL自身&lt;br&gt;的优化主要是对其配置文件my.cnf中的各项参数进行优化调整。下面我们介绍一些对性能影响较大的参数。 由于my.cnf文件的优化设置&lt;br&gt;是与服务器硬件配置息息相关的，因而我们指定一个假想的服务器硬件环境：CPU: 2颗Intel Xeon 2.4GHz 内存: 4GB DDR 硬盘: SCSI&lt;br&gt;73GB(很常见的2U服务器)。 &lt;br&gt;&lt;br&gt;&lt;br&gt;下面，我们根据以上硬件配置结合一份已经优化好的&lt;strong&gt;my.cnf进行说明：&lt;/strong&gt; &lt;br&gt;&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#vim /etc/my.cnf以下只列出my.cnf文件中[mysqld]段落中的内容，其他段落内容对MySQL运行性能影响甚微，因而姑且忽略。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[mysqld]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;port = 3306&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;serverid = 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;socket = /tmp/mysql.sock&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;skip-locking &lt;span class=&quot;comment&quot;&gt;#避免MySQL的外部锁定，减少出错几率增强稳定性。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;skip-name-resolve &lt;span class=&quot;comment&quot;&gt;#禁止MySQL对外部连接进行DNS解析，使用这一选项可以消除MySQL进行DNS解析的时间。但需要注意，如果开启该选&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 项，则所有远程主机连接授权都要使用IP地址方式，否则MySQL将无法正常处理连接请求！&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;back_&lt;span class=&quot;built_in&quot;&gt;log&lt;/span&gt; = 384 &lt;span class=&quot;comment&quot;&gt;#back_log参数的值指出在MySQL暂时停止响应新请求之前的短时间内多少个请求可以被存在堆栈中。 如果系统在一个短&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#时间内有很多连接，则需要增大该参数的值，该参数值指定到来的TCP/IP连接的侦听队列的大小。不同的操作系统在这个队列大小上有&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#它自己的限制。 试图设定back_log高于你的操作系统的限制将是无效的。默认值为50。对于Linux系统推荐设置为小于512的整数。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;key_buffer_size = 256M &lt;span class=&quot;comment&quot;&gt;#key_buffer_size指定用于索引的缓冲区大小，增加它可得到更好的索引处理性能。对于内存在4GB左右的服务&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#器该参数可设置为256M或384M。注意：该参数值设置的过大反而会是服务器整体效率降低！&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;max_allowed_packet = 4M&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;thread_stack = 256K&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;table_cache = 128K&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sort_buffer_size = 6M &lt;span class=&quot;comment&quot;&gt;#查询排序时所能使用的缓冲区大小。注意：该参数对应的分配内存是每连接独占，如果有100个连接，&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;那么实际分配的总共排序缓冲区大小为100 × 6 ＝ 600MB。所以，对于内存在4GB左右的服务器推荐设置为6-8M。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;read&lt;/span&gt;_buffer_size = 4M &lt;span class=&quot;comment&quot;&gt;#读查询操作所能使用的缓冲区大小。和sort_buffer_size一样，该参数对应的分配内存也是每连接独享。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;join_buffer_size = 8M &lt;span class=&quot;comment&quot;&gt;#联合查询操作所能使用的缓冲区大小，和sort_buffer_size一样，该参数对应的分配内存也是每连接独享。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;myisam_sort_buffer_size = 64M&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;table_cache = 512&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;thread_cache_size = 64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;query_cache_size = 64M &lt;span class=&quot;comment&quot;&gt;#指定MySQL查询缓冲区的大小。可以通过在MySQL控制台观察，如果Qcache_lowmem_prunes的值非常大，则表明&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 经常出现缓冲不够的情况；如果Qcache_hits的值非常大，则表明查询缓冲使用非常频繁，如果该值较小反而会影响效率，那么可以考&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 虑不用查询缓冲；Qcache_free_blocks，如果该值非常大，则表明缓冲区中碎片很多。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tmp_table_size = 256M&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;max_connections = 768 &lt;span class=&quot;comment&quot;&gt;#指定MySQL允许的最大连接进程数。如果在访问论坛时经常出现Too Many Connections的错误提 示，则需要增&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 大该参数值。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;max_connect_errors = 10000000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;wait&lt;/span&gt;_timeout = 10 &lt;span class=&quot;comment&quot;&gt;#指定一个请求的最大连接时间，对于4GB左右内存的服务器可以设置为5-10。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;thread_concurrency = 8 &lt;span class=&quot;comment&quot;&gt;#该参数取值为服务器逻辑CPU数量*2，在本例中，服务器有2颗物理CPU，而每颗物理CPU又支持H.T超线程，所以实际取值为4*2=8&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;skip-networking &lt;span class=&quot;comment&quot;&gt;#开启该选项可以彻底关闭MySQL的TCP/IP连接方式，如果WEB服务器是以远程连接的方式访问MySQL数据库服务器则不要开启该选项！否则将无法正常连接！&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;table_cache=1024 &lt;span class=&quot;comment&quot;&gt;#物理内存越大,设置就越大.默认为2402,调到512-1024最佳&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;innodb_additional_mem_pool_size=4M &lt;span class=&quot;comment&quot;&gt;#默认为2M&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;innodb_flush_&lt;span class=&quot;built_in&quot;&gt;log&lt;/span&gt;_at_trx_commit=1 &lt;span class=&quot;comment&quot;&gt;#设置为0就是等到innodb_log_buffer_size列队满后再统一储存,默认为1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;innodb_&lt;span class=&quot;built_in&quot;&gt;log&lt;/span&gt;_buffer_size=2M &lt;span class=&quot;comment&quot;&gt;#默认为1M&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;innodb_thread_concurrency=8 &lt;span class=&quot;comment&quot;&gt;#你的服务器CPU有几个就设置为几,建议用默认一般为8&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;key_buffer_size=256M &lt;span class=&quot;comment&quot;&gt;#默认为218，调到128最佳&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tmp_table_size=64M &lt;span class=&quot;comment&quot;&gt;#默认为16M，调到64-256最挂&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;read&lt;/span&gt;_buffer_size=4M &lt;span class=&quot;comment&quot;&gt;#默认为64K&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;read&lt;/span&gt;_rnd_buffer_size=16M &lt;span class=&quot;comment&quot;&gt;#默认为256K&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sort_buffer_size=32M &lt;span class=&quot;comment&quot;&gt;#默认为256K&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;thread_cache_size=120 &lt;span class=&quot;comment&quot;&gt;#默认为60&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;query_cache_size=32M&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;&lt;br&gt;※值得注意的是： &lt;br&gt;&lt;strong&gt;很多情况需要具体情况具体分析 &lt;br&gt;&lt;/strong&gt;一、如果Key_reads太大，则应该把my.cnf中Key_buffer_size变大，保持Key_reads/Key_read_requests至少1/100以上，越小越好。 &lt;br&gt;二、如果Qcache_lowmem_prunes很大，就要增加Query_cache_size的值。&lt;/p&gt;</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;mysql配置参数详解&quot;&gt;&lt;a href=&quot;#mysql配置参数详解&quot; class=&quot;headerlink&quot; title=&quot;mysql配置参数详解&quot;&gt;&lt;/a&gt;mysql配置参数详解&lt;/h1&gt;
    
    </summary>
    
      <category term="mysql" scheme="http://pengjieran.github.io/categories/mysql/"/>
    
    
      <category term="mysql配置参数" scheme="http://pengjieran.github.io/tags/mysql%E9%85%8D%E7%BD%AE%E5%8F%82%E6%95%B0/"/>
    
      <category term="mysql性能优化" scheme="http://pengjieran.github.io/tags/mysql%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
    
  </entry>
  
</feed>
